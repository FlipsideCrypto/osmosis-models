version: 2
models:
  - name: silver__prices
    description: Prices of tokens in USD from Coingecko and Coinmarketcap
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORDED_AT
            - SYMBOL
    columns:
      - name: RECORDED_AT
        description: Time that the price was recorded at 
        tests:
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 2
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - TIMESTAMP_NTZ
      - name: SYMBOL
        description: Symbol of the token
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR
      - name: PRICE
        description: Price of the token at the recorded time
        tests: 
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT
      - name: TOTAL_SUPPLY
        description: Total supply of the token 
        tests: 
          - not_null: 
              enabled: FALSE # Missing total volume for some tokens 
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT
      - name: VOLUME_24H
        description: Total volume of token traded in a 24H time period
        tests: 
          - not_null : 
              enabled: FALSE # Missing 24H volume for some tokens
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - NUMBER
                - FLOAT
      - name: PROVIDER
        description: Name of the provider of the price information 
        tests: 
          - not_null
          - dbt_expectations.expect_column_values_to_be_in_type_list:
              column_type_list:
                - STRING
                - VARCHAR 